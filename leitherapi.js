eval(function (B, D, A, G, E, F) { function C(A) { return A < 62 ? String.fromCharCode(A += A < 26 ? 65 : A < 52 ? 71 : -4) : A < 63 ? '_' : A < 64 ? '$' : C(A >> 6) + C(A & 63) } while (A > 0) E[C(G--)] = D[--A]; return B.replace(/[\w\$]+/g, function (A) { return E[A] == F[A] ? A : E[A] }) } ('(9(e){"Bc BY";e.z=1.6(o)}(9(){x l||(a,Bb)("l")}()));9 CP(e){v.BM(l);l.Eg=e;l.C5=CP.C5;f(2 v.FY==="9")v.FY(l,CP)}CP.BI=1.6(v.BI);CP.BI.Bn=CP;(9(B,D){"Bc BY";g A=(B.GJ&&/Trident/.test(B.GJ.userAgent));f(!A&&(B.E2||B.B5)){f(!B.B5){B.B5=B.E2;B.Fj=B.FZ}x}g G=B.EA,F=BU.BI.BA,J=1.BI.B$,e={},E=a,BE={},H=w;9 L(d){g e=F.BM(BC,a);x 9(){d.Be(D,e)}}9 C(A){f(H)B.Ce(L(C,A),Z);n{g e=BE[A];f(e){H=r;CC{e()}finally{d(A);H=w}}}}9 I(e){BE[E]=L.Be(D,e);x E++}9 d(e){0 BE[e]}e.F3=9(){g e=h B.FR();e.port1.Ca=9(e){C(Ee(e.CZ))};x 9(){g d=I(BC);e.port2.C$(d);x d}};e.FD=9(){x 9(){g e=I(BC);B.FE.FD(L(C,e));x e}};e.C$=9(){g e="setImmediate$"+E3.random()+"e",d=9(d){f(d.source===B&&2(d.CZ)==="C6"&&d.CZ.CB(e)===Z)C(Ee(d.CZ.BA(e.y)))};f(B.Fh)B.Fh("Eg",d,w);n B.attachEvent("Ca",d);x 9(){g d=I(BC);B.C$(e+d,"*");x d}};e.F1=9(){g e=G.documentElement;x 9(){g d=I(BC),A=G.DL("Fp");A.Ex=9(){C(d);A.Ex=o;e.removeChild(A);A=o};e.appendChild(A);x d}};e.Ce=9(){x 9(){g e=I(BC);B.Ce(L(C,e),Z);x e}};9 M(){f(B.C$&&!B.importScripts){g d=r,e=B.Ca;B.Ca=9(){d=w};B.C$("","*");B.Ca=e;x d}}g K=1.Gm&&1.Gm(B);K=(K&&K.Ce?K:B);f(A)K.B5=e.Ce();n f(J.BM(B.FE)==="[Cs FE]")K.B5=e.FD();n f(M())K.B5=e.C$();n f(B.FR)K.B5=e.F3();n f(G&&("Ex"BH G.DL("Fp")))K.B5=e.F1();n K.B5=e.Ce();K.E2=K.B5;K.Fj=d;K.FZ=d}(9(){x l||(a,Bb)("l")}()));(9(B,G){"Bc BY";g Bh=Z,H=a,P=b,Ba=B.B5,CM=B.Ce,K=B.clearTimeout,BF=BU.BI.CQ,V=BU.BI.BA;9 L(C,e,B){CC{g d=C(B);e.8(d)}Bp(A){e.5(A)}}9 J(A,e,d){Ba(9(){CC{g B=A(d);e.8(B)}Bp(C){e.5(C)}})}9 W(d){g e=!!d;1.BS(l,{EC:{s:[]},F_:{s:e},Da:{s:e?L:J},8:{s:l.8.Ds(l)},5:{s:l.5.Ds(l)},});f(2 d==="9")Ba(9(){CC{l.8(d())}Bp(e){l.5(e)}})}9 B8(e){x e DO W}9 I(e){x B8(e)||((B.FJ)&&(e DO B.FJ)&&(2(e.p==="9")))}9 C(e,A){g B=(2 A==="9")?A:9(){x A},d=h W();CM(9(){CC{d.8(B())}Bp(e){d.5(e)}},e);x d}9 F(e){g d=h W();d.5(e);x d}9 U(A){g d=h W(r);CC{d.8(A())}Bp(e){d.5(e)}x d}9 N(e){g d=h W(r);d.8(e);x d}9 D(e){g d=h W();e(d.8,d.5);x d}9 d(d){g e=Z;BF.BM(d,9(){++e});x e}9 Q(e){e=I(e)?e:N(e);x e.p(9(A){g D=A.y,C=d(A),e=h BU(D);f(C===Z)x N(e);g B=h W();BF.BM(A,9(D,A){g d=(I(D)?D:N(D));d.p(9(d){e[A]=d;f(--C===Z)B.8(e)},B.5)});x B})}9 M(){x Q(BC)}9 BZ(e){e=I(e)?e:N(e);x e.p(9(e){g d=h W();BF.BM(e,9(A){g e=(I(A)?A:N(A));e.p(d.8,d.5)});x d})}9 BT(e){e=I(e)?e:N(e);x e.p(9(A){g D=A.y,C=d(A);f(C===Z)u h RangeError("F4(): array DZ GU DG empty");g e=h BU(D),B=h W();BF.BM(A,9(D,A){g d=(I(D)?D:N(D));d.p(B.8,9(d){e[A]=d;f(--C===Z)B.5(e)})});x B})}9 A(e){e=I(e)?e:N(e);x e.p(9(A){g D=A.y,C=d(A),e=h BU(D);f(C===Z)x N(e);g B=h W();BF.BM(A,9(D,A){g d=(I(D)?D:N(D));d.EW(9(){e[A]=d.GR();f(--C===Z)B.8(e)})});x B})}9 E(d,A){g e=V.BM(BC,b);x Q(e).p(9(e){x d.Be(A,e)})}9 Bq(e,d){x 9(){x Q(BC).p(9(A){x e.Be(d,A)})}}9 S(e,d,A){x Q(e).p(9(e){x e.CQ(d,A)})}9 BR(e,d,A){x Q(e).p(9(e){x e.E1(d,A)})}9 e(e,d,A){x Q(e).p(9(e){x e.Eb(d,A)})}9 Bf(e,d,A){x Q(e).p(9(e){x e.Dp(d,A)})}9 O(e,d,A){x Q(e).p(9(e){x e.Ep(d,A)})}9 R(e,d,A){x Q(e).p(9(e){x e.Ek(d,A)})}9 BE(e,d,A){x Q(e).p(9(e){x e.Es(d,A)})}1.BS(W,{delayed:{s:C},Bx:{s:F},GP:{s:U},s:{s:N},all:{s:Q},race:{s:BZ},8:{s:N},5:{s:F},promise:{s:D},isFuture:{s:B8},E$:{s:I},Fl:{s:M},F4:{s:BT},settle:{s:A},run:{s:E},EX:{s:Bq},CQ:{s:S},E1:{s:BR},Eb:{s:e},Dp:{s:Bf},Ep:{s:O},Ek:{s:R},Es:{s:BE}});1.BS(W.BI,{DM:{Bl:r},Dm:{Bl:r},CT:{s:Bh,Bl:r},Eo:{s:9(e,C,d,D){f(I(D)){f(D===l)u h Cl("Self resolution");D.p(e,C).p(d.8,d.5);x}f((2 D==="Cs")||(2 D==="9")){g E;CC{E=D.p}Bp(A){f(C)l.Da(C,d,A);n d.5(A);x}f(2 E==="9"){CC{g B=E.BM(D,e,C);B.p(d.8,d.5)}Bp(A){d.5(A)}x}}f(e)l.Da(e,d,D);n d.8(D)}},8:{s:9(A){f(l.CT===Bh){l.CT=H;l.DM=A;g d=l.EC;CA(d.y>Z){g e=d.D_();l.Eo(e.FI,e.EP,e.EJ,A)}}}},5:{s:9(e){f(l.CT===Bh){l.CT=P;l.Dm=e;g A=l.EC;CA(A.y>Z){g d=A.D_();f(d.EP)l.Da(d.EP,d.EJ,e);n d.EJ.5(e)}}}},p:{s:9(e,A){f(2 e!=="9")e=o;f(2 A!=="9")A=o;f(e||A){g d=h W(l.F_);f(l.CT===H){f(e)l.Eo(e,A,d,l.DM);n d.8(l.DM)}n f(l.CT===P){f(A)l.Da(A,d,l.Dm);n d.5(l.Dm)}n l.EC.B3({FI:e,EP:A,EJ:d});x d}x l}},GR:{s:9(){BB(l.CT){m Bh:x{Ev:"pending"};m H:x{Ev:"fulfilled",s:l.DM};m P:x{Ev:"rejected",F8:l.Dm}}}},E0:{s:9(d,e){f(2 e==="9"){g A=l;x l["Bp"](9(B){x(e(B)?A["Bp"](d):A)})}x l["Bp"](d)}},"Bp":{s:9(e){x l.p(o,e)}},EW:{s:9(e){x l.p(9(d){g A=e();f(A===G)x d;A=I(A)?A:N(A);x A.p(9(){x d})},9(d){g A=e();f(A===G)u d;A=I(A)?A:N(A);x A.p(9(){u d})})}},CI:{s:9(e,d){g A=h W(),B=CM(9(){A.5(d||h CP("CI"))},e);l.EW(9(){K(B)}).p(A.8,A.5);x A}},delay:{s:9(e){g d=h W();l.p(9(A){CM(9(){d.8(A)},e)},d.5);x d}},tap:{s:9(e,d){x l.p(9(A){e.BM(d,A);x A})}},spread:{s:9(e,d){x l.p(9(A){x e.Be(d,A)})}},k:{s:9(e){x l.p(9(d){x d[e]})}},i:{s:9(d,e){x l.p(9(A){A[d]=e;x A})}},Be:{s:9(d,e){e=e||[];x l.p(9(A){x Q(e).p(9(e){x A[d].Be(A,e)})})}},BM:{s:9(d){g e=V.BM(BC,a);x l.p(9(A){x Q(e).p(9(e){x A[d].Be(A,e)})})}},Ds:{s:9(e){g C=V.BM(BC);f(BU.CO(e))j(g d=Z,B=e.y;d<B;++d){C[Z]=e[d];l.Ds.Be(l,C)}C.D_();g A=l;1.Cm(l,e,{s:9(){g d=V.BM(BC);x A.p(9(A){x Q(C.concat(d)).p(9(d){x A[e].Be(A,d)})})}});x l}},CQ:{s:9(e,d){x S(l,e,d)}},E1:{s:9(e,d){x BR(l,e,d)}},Eb:{s:9(d,A){x e(l,d,A)}},Dp:{s:9(e,d){x Bf(l,e,d)}},Ep:{s:9(e,d){x O(l,e,d)}},Ek:{s:9(e,d){x R(l,e,d)}},Es:{s:9(e,d){x BE(l,e,d)}}});B.z.DD=W;9 T(d){g e=h W(d);1.BS(l,{DR:{s:e},complete:{s:e.8},completeError:{s:e.5},isCompleted:{k:9(){x(e.CT!==Bh)}}})}1.BS(T,{GP:{s:9(){x h T(r)}}});B.z.Et=T}(9(){x l||(a,Bb)("l")}()));(9(F){"Bc BY";g d="Ey"BH F;g B="Ci"BH F;g e=r;f(B)e="CQ"BH h F.Ci();f(d&&B&&e)x;g K=1.6(o),D=Z,C=9(d){g e=1.6(o),A=d.CJ;1.Cm(d,"CJ",{s:9(B,C){f((l===d)&&(C BH K)&&(K[C]===B)){f(!(C BH e))e[C]=1.6(o);x e[C]}n x A.Be(l,BC)},Bl:r,configurable:r,enumerable:w})};f(!d)F.Ey=9 A(){g d=1.6(o),H=D++;K[H]=d;g F=9(A){f(A!==1(A))u h v("s El GU U non-o Cs");g e=A.CJ(d,H);f(e!==A.CJ())x e;C(A);x A.CJ(d,H)},G=1.6(A.BI,{k:{s:9(e){x F(e).s}},i:{s:9(d,e){F(d).s=e}},B1:{s:9(e){x"s"BH F(e)}},"0":{s:9(e){x 0 F(e).s}},CF:{s:9(){0 K[H];H=D++;K[H]=d}}});f(BC.y>Z&&BU.CO(BC[Z])){g B=BC[Z];j(g E=Z,e=B.y;E<e;E++)G.i(B[E][Z],B[E][a])}x G};f(!B){g G=9(){g e=1.6(o),B=D++,d=1.6(o);K[B]=e;g A=9(D){f(D===o)x d;g A=D.CJ(e,B);f(A!==D.CJ())x A;C(D);x D.CJ(e,B)};x{k:9(e){x A(e).s},i:9(d,e){A(d).s=e},B1:9(e){x"s"BH A(e)},"0":9(e){x 0 A(e).s},CF:9(){0 K[B];B=D++;K[B]=e}}},E=9(){g e=1.6(o);x{k:9(){x e.s},i:9(A,d){e.s=d},B1:9(){x"s"BH e},"0":9(){x 0 e.s},CF:9(){e=1.6(o)}}},H=9(){g e=1.6(o);x{k:9(d){x e[d]},i:9(A,d){e[A]=d},B1:9(d){x d BH e},"0":9(d){x 0 e[d]},CF:9(){e=1.6(o)}}};F.Ci=9 J(){g D={"D4":H(),"C6":H(),"Gr":H(),"Cs":G(),"9":G(),"unknown":G(),"undefined":E(),"o":E()},e=Z,A=[],F=1.6(J.BI,{ET:{k:9(){x e}},k:{s:9(e){x D[2(e)].k(e)}},i:{s:9(B,d){f(!l.B1(B)){A.B3(B);e++}D[2(B)].i(B,d)}},B1:{s:9(e){x D[2(e)].B1(e)}},"0":{s:9(d){f(l.B1(d)){e--;A.Ef(A.CB(d),a);x D[2(d)]["0"](d)}x w}},CF:{s:9(){A.y=Z;j(g d BH D)D[d].CF();e=Z}},CQ:{s:9(e,C){j(g d=Z,B=A.y;d<B;d++)e.BM(C,l.k(A[d]),A[d],l)}}});f(BC.y>Z&&BU.CO(BC[Z])){g B=BC[Z];j(g C=Z,d=B.y;C<d;C++)F.i(B[C][Z],B[C][a])}x F}}f(!e){g I=F.Ci;F.Ci=9 J(){g D=h I(),e=Z,A=[],E=1.6(J.BI,{ET:{k:9(){x e}},k:{s:9(e){x D.k(e)}},i:{s:9(B,d){f(!D.B1(B)){A.B3(B);e++}D.i(B,d)}},B1:{s:9(e){x D.B1(e)}},"0":{s:9(d){f(D.B1(d)){e--;A.Ef(A.CB(d),a);x D["0"](d)}x w}},CF:{s:9(){f("CF"BH D)D.CF();n j(g d=Z,B=A.y;d<B;d++)D["0"](A[d]);A.y=Z;e=Z}},CQ:{s:9(e,C){j(g d=Z,B=A.y;d<B;d++)e.BM(C,l.k(A[d]),A[d],l)}}});f(BC.y>Z&&BU.CO(BC[Z])){g B=BC[Z];j(g C=Z,d=B.y;C<d;C++)E.i(B[C][Z],B[C][a])}x E}}}(9(){x l||(a,Bb)("l")}()));(9(e){"Bc BY";e.z.CK={ED:Z,EF:a,Cr:b,Ct:c};e.z.ED=e.z.CK.ED;e.z.EF=e.z.CK.EF;e.z.Cr=e.z.CK.Cr;e.z.Ct=e.z.CK.Ct}(9(){x l||(a,Bb)("l")}()));(9(e){"Bc BY";e.z.Cb={CX:105,DC:108,C2:100,Bo:110,Cx:101,C7:116,DQ:102,DE:78,C_:73,Cf:68,CV:84,C8:90,DT:98,Db:117,Dq:115,ER:103,C0:97,Cp:109,Dn:99,DK:111,Bm:114,EZ:43,EN:45,Bj:59,B0:123,Cn:125,CE:34,Co:46,Fa:70,D$:67,Em:82,Gp:65,C3:69,Cq:122}}(9(){x l||(a,Bb)("l")}()));(9(D){"Bc BY";g d=D.Ey,A=1.6(o),C=h d();9 E(d,e){C.i(d,e);A[e]=d}9 B(e){x C.k(e)}9 e(e){x A[e]}D.z.Dd=1.6(o,{Cv:{s:E},Fe:{s:B},Gl:{s:e}});D.z.Cv=E;E(1,"1")}(9(){x l||(a,Bb)("l")}()));(9(D,I){"Bc BY";g d=h BV(Z),H=1024,e=BU.BI.CB;9 B(d,e,A){d[e++]=A>>>GC&EB;d[e++]=A>>>DY&EB;d[e++]=A>>>Cd&EB;d[e++]=A&EB;x e}9 G(B,e,d){g E=d.y;j(g C=Z;C<E;++C){g A=d.GH(C);f(A<Ck)B[e++]=A;n f(A<2048){B[e++]=192|(A>>Cc);B[e++]=Ck|(A&Bt)}n f(A<Gf||A>Gd){B[e++]=224|(A>>DX);B[e++]=Ck|((A>>Cc)&Bt);B[e++]=Ck|(A&Bt)}n{f(C+a<E){g D=d.codeUnitAt(C+a);f(A<Dw&&Dw<=D&&D<=Gd){g F=(((A&Dw)<<BW)|(D&Ea))+Fo;B[e++]=240|((F>>GA)&Bt);B[e++]=Ck|((F>>DX)&Bt);B[e++]=Ck|((F>>Cc)&Bt);B[e++]=Ck|(F&Bt);++C;continue}}u h v("Malformed C6")}}x e}9 C(A,D){f(D===I)D=A.y;f(D===Z)x["",Z];g C=h Ga(D),B=Z,E=Z;j(g d=A.y;B<D&&E<d;B++){g e=A[E++];BB(e>>BD){m Z:m a:m b:m c:m BD:m DF:m Cc:m FK:C[B]=e;t;m DX:m 13:f(E<d)C[B]=((e&31)<<Cc)|(A[E++]&Bt);n u h v("E9 D8-Cd E8 FA");t;m 14:f(E+a<d)C[B]=((e&F$)<<DX)|((A[E++]&Bt)<<Cc)|(A[E++]&Bt);n u h v("E9 D8-Cd E8 FA");t;m F$:f(E+b<d){g F=((e&FK)<<GA)|((A[E++]&Bt)<<DX)|((A[E++]&Bt)<<Cc)|(A[E++]&Bt)-Fo;f(Z<=F&&F<=1048575){C[B++]=(((F>>BW)&Ea)|Gf);C[B]=((F&Ea)|Dw)}n u h v("Character outside valid Unicode range: GD"+F.B$(DY))}n u h v("E9 D8-Cd E8 FA");t;BL:u h v("Bad D8-Cd encoding GD"+e.B$(DY))}}f(B<D)C=C.B7(Z,B);x[BX.Cg.Be(BX,C),E]}9 E(e){--e;e|=e>>a;e|=e>>b;e|=e>>BD;e|=e>>Cd;e|=e>>DY;x e+a}9 A(){g e=BC;BB(e.y){m a:BB(e[Z].Bn){m BV:l.4=e[Z];l.7=e[Z].y;t;m A:l.4=e[Z].EM();l.7=e[Z].y;t;m BX:l.Bz(e[Z]);t;BL:l.4=h BV(e[Z]);l.7=l.4.y;t}t;m b:l.4=h BV(e[Z],e[a]);l.7=e[a];t;m c:l.4=h BV(e[Z],e[a],e[b]);l.7=e[b];t}l.GZ()}1.BS(A.BI,{4:{s:o,Bl:r},7:{s:Z,Bl:r},DW:{s:Z,Bl:r},q:{s:Z,Bl:r},DU:{s:Z,Bl:r},Cj:{s:9(B){g A=l.4,C=l.7+B,d=E(C);f(A){d*=b;f(d>A.y){g e=h BV(d);e.i(A);l.4=e}}n{d=E3.max(d,H);l.4=h BV(d)}}},y:{k:9(){x l.7}},capacity:{k:9(){x l.4?l.4.y:Z}},position:{k:9(){x l.q}},CD:{k:9(){x(l.4===o)?d:l.4.B7(Z,l.7)}},GZ:{s:9(){l.DW=l.7;l.DU=l.q}},Bv:{s:9(){l.7=l.DW;l.q=l.DU}},CF:{s:9(){l.4=o;l.7=Z;l.DW=Z;l.q=Z;l.DU=Z}},$:{s:9(e){l.Cj(a);l.4[l.7++]=e}},FN:{s:9(e){f((e===(e|Z))&&(e<=EG)){l.Cj(BD);l.7=B(l.4,l.7,e);x}u h Cl("s El Gi F2 Gg")}},writeUInt32BE:{s:9(e){f((e===(e|Z))&&(e>=Z)){l.Cj(BD);l.7=B(l.4,l.7,e);x}u h Cl("s El Gi F2 Gg")}},BP:{s:9(e){g D=e.Ez||e.y;f(D===Z)x;l.Cj(D);g d=l.4,B=l.7;BB(e.Bn){m Dc:d.i(h BV(e),B);t;m BV:d.i(e,B);t;m A:d.i(e.EM(),B);t;BL:j(g C=Z;C<D;C++)d[B+C]=e[C];t}l.7+=D}},BJ:{s:9(e){g C=e.y;f(C===Z)x;l.Cj(C);g d=l.4,B=l.7;j(g A=Z;A<C;++A,++B)d[B]=e.GH(A);l.7=B}},Bz:{s:9(e){g d=e.y;f(d===Z)x;l.Cj(d*c);l.7=G(l.4,l.7,e)}},_:{s:9(){f(l.q<l.7)x l.4[l.q++];x-a}},EV:{s:9(){g d=l.4,A=l.q;f(A+c<l.7){g e=d[A++]<<GC|d[A++]<<DY|d[A++]<<Cd|d[A++];l.q=A;x e}u h v("EOF")}},readUInt32BE:{s:9(){g e=l.EV();f(e<Z)x(e&EG)+GN;x e}},CW:{s:9(e){f(l.q+e>l.7)e=l.7-l.q;f(e===Z)x d;x h BV(l.4.B7(l.q,l.q+=e))}},Bk:{s:9(e){f(l.q+e>l.7){e=l.7-l.q;l.q=l.7}n l.q+=e;x e}},FS:{s:9(B){g A=e.BM(l.4,B,l.q),d;f(A===-a){d=l.4.B7(l.q,l.7);l.q=l.7}n{d=l.4.B7(l.q,A+a);l.q=A+a}x d}},EE:{s:9(B){g A=e.BM(l.4,B,l.q),d="";f(A===l.q)l.q++;n f(A===-a){d=C(l.4.B7(l.q,l.7))[Z];l.q=l.7}n{d=C(l.4.B7(l.q,A))[Z];l.q=A+a}x d}},Bw:{s:9(d){f(l.q+d>l.7)d=l.7-l.q;f(d===Z)x"";g e=l.4.B7(l.q,l.q+=d);x BX.Cg.Be(BX,e)}},CU:{s:9(d){g e=C(l.4.B7(l.q,l.7),d);l.q+=e[a];x e[Z]}},takeBytes:{s:9(){g e=l.CD;l.CF();x e}},EM:{s:9(){x h BV(l.CD)}},B$:{s:9(){x C(l.CD,l.7)[Z]}},clone:{s:9(){x h A(l.EM())}},trunc:{s:9(){l.4=l.4.B7(l.q,l.7);l.7=l.4.y;l.q=Z;l.DW=Z;l.DU=Z}}});9 F(e){f(e.y===Z)x"";BB(e.Bn){m BX:x e;m A:e=e.CD;m Dc:e=h BV(e);m BV:x C(e,e.y)[Z];BL:x BX.Cg.Be(BX,e)}}1.Cm(A,"B$",{s:F});D.z.CS=A}(9(){x l||(a,Bb)("l")}()));(9(A,D){"Bc BY";g Ba=A.Ci,F=A.z.CS,H=A.z.Cb,e=A.z.Dd;9 S(A){g C=A.Bn,d=e.Fe(C);f(d)x d;f(C.C5)d=C.C5;n{g B=C.B$();d=B.substr(Z,B.CB("(")).replace(/(^\\BG*9\\BG*)|(\\BG*e)/ig,"");f(d===""||d==="1")x(2(A.FB)==="9")?A.FB():"1"}f(d!=="1")e.Cv(C,d);x d}g J=1.6(o,{i:{s:9(){}},BP:{s:9(){x w}},Bv:{s:9(){}}});9 G(e){1.BS(l,{D2:{s:e},EQ:{s:h Ba(),Bl:r}})}1.BS(G.BI,{E_:{s:Z,Bl:r},i:{s:9(e){l.EQ.i(e,l.E_++)}},BP:{s:9(e){g d=l.EQ.k(e);f(d!==D){l.D2.$(H.Bm);l.D2.Bz(""+d);l.D2.$(H.Bj);x r}x w}},Bv:{s:9(){l.EQ=h Ba();l.E_=Z}}});9 N(e){x h G(e)}9 Bh(e,d){1.BS(l,{3:{s:e},EO:{s:1.6(o),Bl:r},Do:{s:[],Bl:r},BN:{s:d?J:N(e)},})}9 P(A,B){g d=A.3;f(B===D||B===o){d.$(H.Bo);x}BB(B.Bn){m Function:d.$(H.Bo);x;m Ee:R(A,B);x;m Boolean:BF(A,B);x;m BX:BB(B.y){m Z:d.$(H.Cx);x;m a:d.$(H.Db);d.Bz(B);x}A.Fc(B);x;m CL:A.Gj(B);x;m Ba:A.Ge(B);x;m Dc:m BV:m F:A.F5(B);x;m Int8Array:m Int16Array:m Int32Array:m Ga:m Uint32Array:BR(A,B);x;m Float32Array:m Float64Array:M(A,B);x;BL:f(BU.CO(B))A.Gn(B);n{g e=S(B);f(e==="1")A.Fg(B);n A.FX(B)}t}}9 R(d,A){g e=d.3;A=A.CJ();f(A===(A|Z)){f(Z<=A&&A<=FL)e.$(A+BQ);n{e.$(H.CX);e.BJ(""+A);e.$(H.Bj)}}n f(GK(A))e.$(H.DE);n f(GE(A)){e.$(H.C2);e.BJ(""+A);e.$(H.Bj)}n{e.$(H.C_);e.$((A>Z)?H.EZ:H.EN)}}9 C(d,A){g e=d.3;f(Z<=A&&A<=FL)e.$(A+BQ);n{f(A<-GN||A>EG)e.$(H.DC);n e.$(H.CX);e.BJ(""+A);e.$(H.Bj)}}9 K(d,A){g e=d.3;f(GK(A))e.$(H.DE);n f(GE(A)){e.$(H.C2);e.BJ(""+A);e.$(H.Bj)}n{e.$(H.C_);e.$((A>Z)?H.EZ:H.EN)}}9 BF(d,e){d.3.$(e.CJ()?H.C7:H.DQ)}9 O(E,e){E.BN.i(e);g B=E.3,C=("FG"+e.getUTCFullYear()).BA(-BD),d=("Bd"+(e.getUTCMonth()+a)).BA(-b),F=("Bd"+e.getUTCDate()).BA(-b),A=("Bd"+e.getUTCHours()).BA(-b),G=("Bd"+e.getUTCMinutes()).BA(-b),I=("Bd"+e.getUTCSeconds()).BA(-b),D=("CY"+e.getUTCMilliseconds()).BA(-c);B.$(H.Cf);B.BJ(C+d+F);B.$(H.CV);B.BJ(A+G+I);f(D!=="CY"){B.$(H.Co);B.BJ(D)}B.$(H.C8)}9 d(E,e){E.BN.i(e);g B=E.3,C=("FG"+e.getFullYear()).BA(-BD),d=("Bd"+(e.getMonth()+a)).BA(-b),F=("Bd"+e.getDate()).BA(-b),A=("Bd"+e.Fz()).BA(-b),G=("Bd"+e.F6()).BA(-b),I=("Bd"+e.Fu()).BA(-b),D=("CY"+e.GL()).BA(-c);f((A==="Bd")&&(G==="Bd")&&(I==="Bd")&&(D==="CY")){B.$(H.Cf);B.BJ(C+d+F)}n f((C==="E5")&&(d==="F9")&&(F==="F9")){B.$(H.CV);B.BJ(A+G+I);f(D!=="CY"){B.$(H.Co);B.BJ(D)}}n{B.$(H.Cf);B.BJ(C+d+F);B.$(H.CV);B.BJ(A+G+I);f(D!=="CY"){B.$(H.Co);B.BJ(D)}}B.$(H.Bj)}9 L(B,C){B.BN.i(C);g d=B.3,e=("Bd"+C.Fz()).BA(-b),D=("Bd"+C.F6()).BA(-b),E=("Bd"+C.Fu()).BA(-b),A=("CY"+C.GL()).BA(-c);d.$(H.CV);d.BJ(e+D+E);f(A!=="CY"){d.$(H.Co);d.BJ(A)}d.$(H.Bj)}9 Q(A,d){A.BN.i(d);g e=A.3;e.$(H.DT);g B=d.Ez||d.y;f(B>Z)e.BJ(""+B);e.$(H.CE);f(B>Z)e.BP(d);e.$(H.CE)}9 T(A,e){A.BN.i(e);g d=A.3,B=e.y;d.$(H.Dq);f(B>Z)d.BJ(""+B);d.$(H.CE);f(B>Z)d.Bz(e);d.$(H.CE)}9 E(C,e,A){C.BN.i(e);g d=C.3,D=e.y;d.$(H.C0);f(D>Z)d.BJ(""+D);d.$(H.B0);j(g B=Z;B<D;B++)A(C,e[B]);d.$(H.Cn)}9 BR(e,d){f(!e.BN.BP(d))E(e,d,C)}9 M(e,d){f(!e.BN.BP(d))E(e,d,K)}9 B(A,C){A.BN.i(C);g e=A.3,B=[];j(g D BH C)f(C.F0(D)&&2(C[D])!=="9")B[B.y]=D;g E=B.y;e.$(H.Cp);f(E>Z)e.BJ(""+E);e.$(H.B0);j(g d=Z;d<E;d++){P(A,B[d]);P(A,C[B[d]])}e.$(H.Cn)}9 BZ(d,A){d.BN.i(A);g e=d.3,B=A.ET;e.$(H.Cp);f(B>Z)e.BJ(""+B);e.$(H.B0);A.CQ(9(e,A){P(d,A);P(d,e)});e.$(H.Cn)}9 BE(D,A){g d=D.3,e=S(A),E,B=D.EO[e];f(B>=Z)E=D.Do[B];n{E=[];j(g F BH A)f(A.F0(F)&&2(A[F])!=="9")E[E.y]=F.B$();B=I(D,e,E)}d.$(H.DK);d.BJ(""+B);d.$(H.B0);D.BN.i(A);g G=E.y;j(g C=Z;C<G;C++)P(D,A[E[C]]);d.$(H.Cn)}9 I(C,e,D){g d=C.3,E=D.y;d.$(H.Dn);d.BJ(""+e.y);d.$(H.CE);d.Bz(e);d.$(H.CE);f(E>Z)d.BJ(""+E);d.$(H.B0);j(g A=Z;A<E;A++)T(C,D[A]);d.$(H.Cn);g B=C.Do.y;C.EO[e]=B;C.Do[B]=D;x B}1.BS(Bh.BI,{C9:{s:9(e){P(l,e)}},writeInteger:{s:9(e){C(l,e)}},writeDouble:{s:9(e){K(l,e)}},GB:{s:9(e){BF(l,e)}},writeUTCDate:{s:9(e){O(l,e)}},writeUTCDateWithRef:{s:9(e){f(!l.BN.BP(e))O(l,e)}},writeDate:{s:9(e){d(l,e)}},Gj:{s:9(e){f(!l.BN.BP(e))d(l,e)}},writeTime:{s:9(e){L(l,e)}},writeTimeWithRef:{s:9(e){f(!l.BN.BP(e))L(l,e)}},writeBytes:{s:9(e){Q(l,e)}},F5:{s:9(e){f(!l.BN.BP(e))Q(l,e)}},Bz:{s:9(e){T(l,e)}},Fc:{s:9(e){f(!l.BN.BP(e))T(l,e)}},Fq:{s:9(e){E(l,e,P)}},Gn:{s:9(e){f(!l.BN.BP(e))E(l,e,P)}},writeMap:{s:9(e){B(l,e)}},Fg:{s:9(e){f(!l.BN.BP(e))B(l,e)}},writeHarmonyMap:{s:9(e){BZ(l,e)}},Ge:{s:9(e){f(!l.BN.BP(e))BZ(l,e)}},writeObject:{s:9(e){BE(l,e)}},FX:{s:9(e){f(!l.BN.BP(e))BE(l,e)}},Bv:{s:9(){l.EO=1.6(o);l.Do.y=Z;l.BN.Bv()}}});A.z.C4=Bh}(9(){x l||(a,Bb)("l")}()));(9(W,Bg){"Bc BY";g BF=W.Ci,BO=W.z.CS,Q=W.z.Cb,e=W.z.Dd;9 Y(A,d){f(A&&d){g e="";f(2(d)==="D4")e=BX.Cg(d);n e=BX.Cg.Be(BX,d);u h v("Tag \\""+e+"\\" expected, but \\""+BX.Cg(A)+"\\" GF BH 3")}n f(A)u h v("Unexpected C9 tag \\""+BX.Cg(A)+"\\" BH 3");n u h v("No byte GF BH 3")}9 B9(e){g d=h BO();H(e,d);x d.CD}9 H(e,d){K(e,d,e._())}9 K(e,d,A){d.$(A);BB(A){m BQ:m De:m Df:m Dg:m Dh:m Di:m Dj:m Dk:m Dl:m CR:m Q.Bo:m Q.Cx:m Q.C7:m Q.DQ:m Q.DE:t;m Q.C_:d.$(e._());t;m Q.CX:m Q.DC:m Q.C2:m Q.Bm:Bh(e,d);t;m Q.Cf:m Q.CV:G(e,d);t;m Q.Db:Bq(e,d);t;m Q.DT:L(e,d);t;m Q.Dq:M(e,d);t;m Q.ER:B8(e,d);t;m Q.C0:m Q.Cp:m Q.DK:R(e,d);t;m Q.Dn:R(e,d);H(e,d);t;m Q.C3:H(e,d);t;BL:Y(A)}}9 Bh(e,d){g A;Cw{A=e._();d.$(A)}CA(A!==Q.Bj)}9 G(e,d){g A;Cw{A=e._();d.$(A)}CA(A!==Q.Bj&&A!==Q.C8)}9 Bq(e,d){d.Bz(e.CU(a))}9 L(e,d){g A=Z,B=BQ;Cw{A*=BW;A+=B-BQ;B=e._();d.$(B)}CA(B!==Q.CE);d.BP(e.CW(A+a))}9 M(e,d){g A=Z,B=BQ;Cw{A*=BW;A+=B-BQ;B=e._();d.$(B)}CA(B!==Q.CE);d.Bz(e.CU(A+a))}9 B8(e,d){d.BP(e.CW(38))}9 R(e,d){g A;Cw{A=e._();d.$(A)}CA(A!==Q.B0);CA((A=e._())!==Q.Cn)K(e,d,A);d.$(A)}9 I(e){1.BS(l,{3:{s:e},GV:{s:9(){x B9(e)}}})}W.z.ES=I;g BR=1.6(o,{i:{s:9(){}},CW:{s:9(){Y(Q.Bm)}},Bv:{s:9(){}}});9 CG(){1.BS(l,{D1:{s:[]}})}1.BS(CG.BI,{i:{s:9(e){l.D1.B3(e)}},CW:{s:9(e){x l.D1[e]}},Bv:{s:9(){l.D1.y=Z}}});9 C(){x h CG()}9 D(e){g A=W,d=e.Fx("."),B;j(B=Z;B<d.y;B++){A=A[d[B]];f(A===Bg)x o}x A}9 Ba(G,C,E,e){f(E<C.y){g A=C[E];G[A]=e;g H=Ba(G,C,E+a,".");f(E+a<C.y)f(H===o)H=Ba(G,C,E+a,"d");x H}g d=G.Fl("");CC{g F=D(d);x((2(F)==="9")?F:o)}Bp(B){x o}}9 d(d){g C=e.Gl(d);f(C)x C;C=D(d);f(2(C)==="9"){e.Cv(C,d);x C}g B=[],A=d.CB("d");CA(A>=Z){B[B.y]=A;A=d.CB("d",A+a)}f(B.y>Z){g E=d.Fx("");C=Ba(E,B,Z,".");f(C===o)C=Ba(E,B,Z,"d");f(2(C)==="9"){e.Cv(C,d);x C}}C=9(){};1.Cm(C.BI,"FB",{s:9(){x d}});e.Cv(C,d);x C}9 P(d,A){g e=d.EE(A);f(e.y===Z)x Z;x Bu(e,BW)}9 A(d){g e=d.3,A=e._();BB(A){m BQ:m De:m Df:m Dg:m Dh:m Di:m Dj:m Dk:m Dl:m CR:x A-BQ;m Q.CX:x BT(e);m Q.DC:x O(e);m Q.C2:x U(e);m Q.Bo:x o;m Q.Cx:x"";m Q.C7:x r;m Q.DQ:x w;m Q.DE:x Fd;m Q.C_:x DJ(e);m Q.Cf:x CN(d);m Q.CV:x B_(d);m Q.DT:x E(d);m Q.Db:x Bf(d);m Q.Dq:x B6(d);m Q.ER:x Bi(d);m Q.C0:x J(d);m Q.Cp:x d.Dt?S(d):By(d);m Q.Dn:BE(d);x T(d);m Q.DK:x Br(d);m Q.Bm:x Bs(d);m Q.C3:u h v(CH(d));BL:Y(A)}}9 BT(e){x P(e,Q.Bj)}9 BG(e){g d=e._();BB(d){m BQ:m De:m Df:m Dg:m Dh:m Di:m Dj:m Dk:m Dl:m CR:x d-BQ;m Q.CX:x BT(e);BL:Y(d)}}9 O(d){g e=d.EE(Q.Bj),A=Bu(e,BW);f(A.B$()===e)x A;x e}9 DI(e){g d=e._();BB(d){m BQ:m De:m Df:m Dg:m Dh:m Di:m Dj:m Dk:m Dl:m CR:x d-BQ;m Q.CX:m Q.DC:x O(e);BL:Y(d)}}9 U(e){x parseFloat(e.EE(Q.Bj))}9 X(e){g d=e._();BB(d){m BQ:m De:m Df:m Dg:m Dh:m Di:m Dj:m Dk:m Dl:m CR:x d-BQ;m Q.CX:m Q.DC:m Q.C2:x U(e);m Q.DE:x Fd;m Q.C_:x DJ(e);BL:Y(d)}}9 DJ(e){x((e._()===Q.EN)?-FP:FP)}9 D0(e){g d=e._();BB(d){m Q.C7:x r;m Q.DQ:x w;BL:Y(d)}}9 CN(D){g B=D.3,C=Bu(B.Bw(BD),BW),d=Bu(B.Bw(b),BW)-a,G=Bu(B.Bw(b),BW),e,F=B._();f(F===Q.CV){g A=Bu(B.Bw(b),BW),H=Bu(B.Bw(b),BW),I=Bu(B.Bw(b),BW),E=Z;F=B._();f(F===Q.Co){E=Bu(B.Bw(c),BW);F=B._();f((F>=BQ)&&(F<=CR)){B.Bk(b);F=B._();f((F>=BQ)&&(F<=CR)){B.Bk(b);F=B._()}}}f(F===Q.C8)e=h CL(CL.Eq(C,d,G,A,H,I,E));n e=h CL(C,d,G,A,H,I,E)}n f(F===Q.C8)e=h CL(CL.Eq(C,d,G));n e=h CL(C,d,G);D.B2.i(e);x e}9 BZ(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Cf:x CN(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 B_(A){g d=A.3,C,e=Bu(d.Bw(b),BW),E=Bu(d.Bw(b),BW),F=Bu(d.Bw(b),BW),B=Z,D=d._();f(D===Q.Co){B=Bu(d.Bw(c),BW);D=d._();f((D>=BQ)&&(D<=CR)){d.Bk(b);D=d._();f((D>=BQ)&&(D<=CR)){d.Bk(b);D=d._()}}}f(D===Q.C8)C=h CL(CL.Eq(E5,Z,a,e,E,F,B));n C=h CL(E5,Z,a,e,E,F,B);A.B2.i(C);x C}9 CM(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.CV:x B_(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 E(d){g e=d.3,B=P(e,Q.CE),A=e.CW(B);e.Bk(a);d.B2.i(A);x A}9 Dy(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Cx:x h BV(Z);m Q.DT:x E(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 Bf(e){x e.3.CU(a)}9 Cu(A){g d=A.3,e=d.CU(P(d,Q.CE));d.Bk(a);x e}9 B6(d){g e=Cu(d);d.B2.i(e);x e}9 CH(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Cx:x"";m Q.Db:x Bf(e);m Q.Dq:x B6(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 Bi(A){g d=A.3;d.Bk(a);g e=d.Bw(36);d.Bk(a);A.B2.i(e);x e}9 DA(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.ER:x Bi(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 J(d){g e=d.3,D=[];d.B2.i(D);g B=P(e,Q.B0);j(g C=Z;C<B;C++)D[C]=A(d);e.Bk(a);x D}9 N(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.C0:x J(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 By(d){g e=d.3,D={};d.B2.i(D);g B=P(e,Q.B0);j(g C=Z;C<B;C++){g F=A(d),E=A(d);D[F]=E}e.Bk(a);x D}9 F(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Cp:x By(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 S(d){g e=d.3,D=h BF();d.B2.i(D);g B=P(e,Q.B0);j(g C=Z;C<B;C++){g F=A(d),E=A(d);D.i(F,E)}e.Bk(a);x D}9 B(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Cp:x S(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 Br(d){g e=d.3,D=d.D6[P(e,Q.B0)],B=h D.Gk();d.B2.i(B);j(g C=Z;C<D.FV;C++)B[D.GS[C]]=A(d);e.Bk(a);x B}9 T(e){g d=e.3._();BB(d){m Q.Bo:x o;m Q.Dn:BE(e);x T(e);m Q.DK:x Br(e);m Q.Bm:x Bs(e);BL:Y(d)}}9 BE(B){g A=B.3,e=Cu(B),C=P(A,Q.B0),E=[];j(g D=Z;D<C;D++)E[D]=CH(B);A.Bk(a);e=d(e);B.D6.B3({Gk:e,FV:C,GS:E})}9 Bs(e){x e.B2.CW(P(e.3,Q.Bj))}9 V(d,A,e){I.BM(l,d);l.Dt=!!e;1.BS(l,{D6:{s:[]},B2:{s:A?BR:C()}})}V.BI=1.6(I.BI);V.BI.Bn=V;1.BS(V.BI,{Dt:{s:w,Bl:r},GX:{s:9(e,d){f(d===Bg)d=l.3._();f(d!==e)Y(d,e)}},checkTags:{s:9(e,d){f(d===Bg)d=l.3._();f(e.CB(d)>=Z)x d;Y(d,e)}},DS:{s:9(){x A(l)}},readInteger:{s:9(){x BG(l.3)}},readLong:{s:9(){x DI(l.3)}},readDouble:{s:9(){x X(l.3)}},readBoolean:{s:9(){x D0(l.3)}},readDateWithoutTag:{s:9(){x CN(l)}},readDate:{s:9(){x BZ(l)}},readTimeWithoutTag:{s:9(){x B_(l)}},readTime:{s:9(){x CM(l)}},readBytesWithoutTag:{s:9(){x E(l)}},FS:{s:9(){x Dy(l)}},readStringWithoutTag:{s:9(){x B6(l)}},CU:{s:9(){x CH(l)}},readGuidWithoutTag:{s:9(){x Bi(l)}},readGuid:{s:9(){x DA(l)}},FT:{s:9(){x J(l)}},E4:{s:9(){x N(l)}},readMapWithoutTag:{s:9(){x By(l)}},readMap:{s:9(){x F(l)}},readHarmonyMapWithoutTag:{s:9(){x S(l)}},readHarmonyMap:{s:9(){x B(l)}},readObjectWithoutTag:{s:9(){x Br(l)}},readObject:{s:9(){x T(l)}},Bv:{s:9(){l.D6.y=Z;l.B2.Bv()}}});W.z.Cy=V}(9(){x l||(a,Bb)("l")}()));(9(C){"Bc BY";g A=C.z.CS,D=C.z.C4,B=C.z.Cy;9 e(C,d){g e=h A(),B=h D(e,d);B.C9(C);x e}9 d(d,C,e){f(!(d DO A))d=h A(d);x h B(d,C,e).DS()}C.z.FC={C9:9(A,d){x e(A,d).CD},DS:d};C.z.C9=e;C.z.DS=d}(9(){x l||(a,Bb)("l")}()));(9(C,E){"Bc BY";g N=C.B5,K=C.z.Cb,R=C.z.CK,G=C.z.CS,Ba=C.z.C4,B=C.z.Cy,BZ=C.z.DD,S=h BV(a);S[Z]=K.Cq;9 F(){}g Q="Gr",O="C6",L="D4",H="9",BR="_OnError",d="_onError",M="_onerror",A="_Callback",D="_callback",P="_OnSuccess",e="_onSuccess",BE="_onsuccess";9 J(Cu,T){g C,CH=w,Dz=w,W=w,CN=F,X=[],Bq=w,B9=[],B6=h BZ(),Y=30000,Br=1.6(o),Ch=o,BK=l;9 Bh(e){g d={DN:BK,userdata:{}};j(g A=Z,B=X.y;A<B;A++)e=X[A].EH(e,d);x BK.Ej(e).p(9(e){j(g A=X.y-a;A>=Z;A--)e=X[A].D5(e,d);x e})}9 FH(e){Bh(S).p(9(d){g H=o;CC{g C=h G(d),E=h B(C,r),F=C._();BB(F){m K.C3:H=h v(E.CU());t;m K.Fa:g A=E.E4();E.GX(K.Cq);Ec(e,A);t;BL:H=h v("Ft Gq:\\CH\\Y"+G.B$(d));t}}Bp(D){H=D}f(H!==o)B6.5(H);n B6.8(e)},B6.5)}9 EU(d,e){x BZ.EX(9(){x DA(d,e,BC)})}9 I(A,e,B,C,d){f(e[C]!==E)x;e[C]={};f(2(d)===O||d.Bn===1)d=[d];f(BU.CO(d))j(g D=Z;D<d.y;D++){g F=d[D];f(2(F)===O)e[C][F]=EU(A,B+C+"d"+F);n j(g G BH F)I(A,e[C],C+"d",G,F[G])}}9 Ec(A,e){j(g C=Z;C<e.y;C++){g d=e[C];f(2(d)===O){f(A[d]===E)A[d]=EU(A,d)}n j(g B BH d)I(A,A,"",B,d[B])}}9 CM(e,A){g B=E3.min(e.y,A.y);j(g d=Z;d<B;++d)A[d]=e[d]}9 DA(BO,V,T){g CG=h BZ(),F=R.ED,Bg;f(!Bq&&!B9.y||Bq){g C=CH,O=Dz,BG=V.Er(),Y=BO[V+BR]||BO[V+d]||BO[V+M]||BO[BG+BR]||BO[BG+d]||BO[BG+M]||BK[V+BR]||BK[V+d]||BK[V+M]||BK[BG+BR]||BK[BG+d]||BK[BG+M],X=BO[V+A]||BO[V+D]||BO[V+P]||BO[V+e]||BO[V+BE]||BO[BG+A]||BO[BG+D]||BO[BG+P]||BO[BG+e]||BO[BG+BE]||BK[V+A]||BK[V+D]||BK[V+P]||BK[V+e]||BK[V+BE]||BK[BG+A]||BK[BG+D]||BK[BG+P]||BK[BG+e]||BK[BG+BE],I=T.y,B8=2(T[I-DF]),Bf=2(T[I-BD]),BF=2(T[I-c]),U=2(T[I-b]),S=2(T[I-a]);f(S===Q&&U===L&&BF===Q&&Bf===H&&B8===H){O=T[I-a];F=T[I-b];C=T[I-c];Y=T[I-BD];X=T[I-DF];0 T[I-a];0 T[I-b];0 T[I-c];0 T[I-BD];0 T[I-DF];T.y-=DF}n f(S===Q&&U===L&&BF===H&&Bf===H){O=T[I-a];F=T[I-b];Y=T[I-c];X=T[I-BD];0 T[I-a];0 T[I-b];0 T[I-c];0 T[I-BD];T.y-=BD}n f(S===L&&U===Q&&BF===H&&Bf===H){F=T[I-a];C=T[I-b];Y=T[I-c];X=T[I-BD];0 T[I-a];0 T[I-b];0 T[I-c];0 T[I-BD];T.y-=BD}n f(S===Q&&U===Q&&BF===H&&Bf===H){O=T[I-a];C=T[I-b];Y=T[I-c];X=T[I-BD];0 T[I-a];0 T[I-b];0 T[I-c];0 T[I-BD];T.y-=BD}n f(S===Q&&U===H&&BF===H){C=T[I-a];Y=T[I-b];X=T[I-c];0 T[I-a];0 T[I-b];0 T[I-c];T.y-=c}n f(S===L&&U===H&&BF===H){F=T[I-a];Y=T[I-b];X=T[I-c];0 T[I-a];0 T[I-b];0 T[I-c];T.y-=c}n f(S===H&&U===H){Y=T[I-a];X=T[I-b];0 T[I-a];0 T[I-b];T.y-=b}n f(S===Q&&U===L&&BF===Q&&Bf===H){O=T[I-a];F=T[I-b];C=T[I-c];X=T[I-BD];0 T[I-a];0 T[I-b];0 T[I-c];0 T[I-BD];T.y-=BD}n f(S===Q&&U===L&&BF===H){O=T[I-a];F=T[I-b];X=T[I-c];0 T[I-a];0 T[I-b];0 T[I-c];T.y-=c}n f(S===L&&U===Q&&BF===H){F=T[I-a];C=T[I-b];X=T[I-c];0 T[I-a];0 T[I-b];0 T[I-c];T.y-=c}n f(S===Q&&U===Q&&BF===H){O=T[I-a];C=T[I-b];X=T[I-c];0 T[I-a];0 T[I-b];0 T[I-c];T.y-=c}n f(S===Q&&U===H){C=T[I-a];X=T[I-b];0 T[I-a];0 T[I-b];T.y-=b}n f(S===L&&U===H){F=T[I-a];X=T[I-b];0 T[I-a];0 T[I-b];T.y-=b}n f(S===H){X=T[I-a];0 T[I-a];T.y--}f(Bq)f(F===R.Ct)u h v("CK.Ct FU\'B_ EI BH GO Fw.");n f(F===R.Cr)u h v("CK.Cr FU\'B_ EI BH GO Fw.");Bg=h G();Bg.$(K.D$);g By=h Ba(Bg,O);By.Bz(V);f(T.y>Z||C){By.Bv();By.Fq(T);f(C)By.GB(r)}f(Bq)B9.B3({D3:T,EL:V,CZ:Bg.CD,GI:F,C1:X,Dv:Y,DR:CG});n Bg.$(K.Cq)}f(!Bq){g Bi=B9.y,J=!!Bi,E=h G();f(J){j(g N=Z;N<Bi;++N){E.BP(B9[N].CZ);0 B9[N].CZ}E.$(K.Cq)}n E=Bg;g BT=B9.BA(Z);B9.y=Z;Bh(E.CD).p(9(E){g e=o,M=o,I;f(F===R.Ct)e=E;n f(F===R.Cr)e=E.B7(Z,E.Ez-a);n{g C=h G(E),H=h B(C,w,W),L;I=-a;CC{CA((L=C._())!==K.Cq)BB(L){m K.Em:f(J)F=BT[I+a].GI;f(F===R.EF)e=H.GV();n{H.Bv();e=H.DS()}f(J){BT[++I].DH=e;BT[I].Bx=o}t;m K.Gp:H.Bv();g A=H.E4();f(J)CM(A,BT[I].D3);n CM(A,T);t;m K.C3:H.Bv();M=h v(H.CU());f(J)BT[++I].Bx=M;t;BL:M=h v("Ft Gq:\\CH\\Y"+G.B$(E));f(J)BT[++I].Bx=M;t}}Bp(D){M=D;f(J)BT[I<Z?Z:I>=Bi?I-a:I].Bx=M}}f(!J){Bi=a;BT=[{D3:T,EL:V,C1:X,Dv:Y,DH:e,Bx:M,DR:CG}]}j(I=Z;I<Bi;++I){g d=BT[I];f(d.Bx){d.DR.5(d.Bx);f(d.Dv)d.Dv(d.EL,d.Bx);n CN(d.EL,d.Bx)}n{d.DR.8(d.DH);f(d.C1)d.C1(d.DH,d.D3)}}},9(e){CG.5(e);f(Y)Y(V,e);n CN(V,e)})}x CG}9 By(){x CN}9 DI(e){f(2(e)===H)CN=e}9 Fv(){x C}9 BO(){x Y}9 Dy(e){f(2(e)==="D4")Y=e|Z;n Y=Z}9 Fs(){x CH}9 D0(e){CH=!!e}9 J(){x Dz}9 Fi(e){Dz=!!e}9 Fr(){x W}9 B_(e){W=!!e}9 Bs(){f(X.y===Z)x o;x X[Z]}9 DJ(e){X.y=Z;f(e&&2 e.D5==="9"&&2 e.EH==="9")X.B3(e)}9 Ff(e){f(e&&2 e.D5==="9"&&2 e.EH==="9")X.B3(e)}9 BF(e){g d=X.CB(e);f(d===-a)x w;X.Ef(d,a);x r}9 V(B,e,A){f(A===E){f(2(e)===Q){A=e;e=w}f(!e)f(2(B)===Q){A=B;B=w}n f(B&&B.Bn===1||BU.CO(B)){e=B;B=w}}g d=BK;f(A)d={};f(!B&&!C)x h v("You should i server D7 first!");f(B)C=B;f(2(e)===O||(e&&e.Bn===1))e=[e];f(!BU.CO(e)){N(FH,d);x B6}Ec(d,e);B6.8(d);x d}9 U(){g e=BC,d=BU.BI.D_.Be(e),D=w,B;j(B BH e)f(2(e[B])===H){D=r;t}f(!D&&(e.y>Z)&&BU.CO(e[Z])){g A=e[Z];A.B3(9(e,d){});g C=e.y;j(B=a;B<C;B++)A.B3(e[B]);e=A}x DA(BK,d,e)}9 FQ(){f(!Bq)Bq=r}9 BG(){Bq=w;f(B9.y)DA()}9 CG(d,e){x B6.p(d,e)}9 B8(d,B,A){f(Br[d]){g e=Br[d];f(e[B])x e[B];x o}f(A)Br[d]=1.6(o);x o}9 Bi(e,B,d){f(2 e!==O)u h Cl("Go C5 DZ DG U C6.");f(B===E||B===o)f(2 d===H)B=d;n u h Cl("C1 DZ DG U 9.");f(2 B===H){d=B;f(Ch===o)Ch=U("#");Ch.p(9(A){Bi(e,A,d)});x}f(2 d!==H)u h Cl("C1 DZ DG U 9.");f(BZ.E$(B)){B.p(9(A){Bi(e,A,d)});x}g A=B8(e,B,r);f(A===o){A={Eu:9(d){g A=B8(e,B,w);f(A){f(d!==o){g C=A.DP;j(g D=Z,E=C.y;D<E;++D)C[D](d)}f(B8(e,B,w)!==o){g F=9(){U(e,B,A.Eu,9(){N(F)})};N(F)}}},DP:[d]};Br[e][B]=A;g C=9(){U(e,B,A.Eu,9(){N(C)})};C()}n f(A.DP.CB(d)<Z)A.DP.B3(d)}9 Bf(d,D,A){f(d)f(2 A===H){g B=d[D];f(B){g C=B.DP,e=C.CB(A);f(e>=Z){C[e]=C[C.y-a];C.y--}f(C.y===Z)0 d[D]}}n 0 d[D]}9 Bg(d,B,A){f(2 d!==O)u h Cl("Go C5 DZ DG U C6.");f(B===E||B===o)f(2 A===H)B=A;n{0 Br[d];x}f(2 B===H){A=B;B=o}f(B===o){f(Ch===o){f(Br[d]){g e=Br[d];j(B BH e)Bf(e,B,A)}}n Ch.p(9(e){Bg(d,e,A)})}n f(BZ.E$(B))B.p(9(e){Bg(d,e,A)});n Bf(Br[d],B,A)}9 BT(){x Ch}f(2(Cu)===O)V(Cu,T);1.BS(l,{onError:{k:By,i:DI},EK:{k:By,i:DI},D7:{k:Fv},Fm:{k:BT},CI:{k:BO,i:Dy},byref:{k:Fs,i:D0},simple:{k:J,i:Fi},Dt:{k:Fr,i:B_},Dp:{k:Bs,i:DJ},addFilter:{s:Ff},removeFilter:{s:BF},useService:{s:V},invoke:{s:BZ.EX(U,BK)},beginBatch:{s:FQ},endBatch:{s:BG},ready:{s:CG},subscribe:{s:Bi},unsubscribe:{s:Bg}})}9 I(A,e){g d=EA.DL("U");d.E6=A;f(d.B4==="FW:"||d.B4==="Fn:")x h C.z.Dx(A,e);f(d.B4==="GW:"||d.B4==="Fk:")x h C.z.D9(A,e);u h v("The "+d.B4+" DN isn\'B_ implemented.")}1.Cm(J,"6",{s:I});C.z.Dr=J}(9(){x l||(a,Bb)("l")}()));(9(C,E){"Bc BY";g D=C.z.Dr,A=C.z.DD;9 e(){}9 d(K,F){f(l.Bn!==d)x h d(K,F);D.BM(l,K,F);g H=1.6(o),B=e,N=e,BR=l;9 I(d){g F=h A(),D=h XMLHttpRequest();D.open("POST",BR.D7,r);f(C.GY!==E&&C.GY.B4!=="file:")D.withCredentials="r";D.responseType="Gc";j(g G BH H)D.setRequestHeader(G,H[G]);D.Eh=9(){D.Eh=e;f(D.En)f(D.En===200)F.8(h BV(D.response));n F.5(h v(D.En+":"+D.statusText))};D.EK=9(){F.5(h v("Bx"))};f(D.FF!==E)D.FF.EY=B;D.EY=N;f(d.Bn===BX||Dc.Gh)D.DB(d);n f(d.Cz.BA)D.DB(d.Cz.BA(Z,d.y));n D.DB(d.Cz);f(BR.CI>Z)x F.CI(BR.CI).E0(9(d){D.Eh=e;D.EK=e;D.abort();u d},9(e){x e DO CP});x F}9 J(e){f(2(e)==="9")B=e}9 G(){x B}9 M(e){f(2(e)==="9")N=e}9 BE(){x N}9 L(e,d){f(e.Er()!=="Fb-type"&&e.Er()!=="Fb-y")f(d)H[e]=d;n 0 H[e]}1.BS(l,{onProgress:{k:G,i:J},EY:{k:G,i:J},onRequestProgress:{k:G,i:J},onResponseProgress:{k:BE,i:M},setHeader:{s:L},Ej:{s:I}})}9 B(B,e){g A=EA.DL("U");A.E6=B;f(A.B4==="FW:"||A.B4==="Fn:")x h d(B,e);u h v("GM DN GQ\'B_ EI "+A.B4+" FM.")}1.Cm(d,"6",{s:B});C.z.Dx=d}(9(){x l||(a,Bb)("l")}()));(9(C,F){"Bc BY";g D=C.z.Dr,d=C.z.CS,A=C.z.DD;9 e(){}9 E(K,B){f(l.Bn!==E)x h E(K,B);D.BM(l,K,B);l.CI=Z;g Q=Z,M=Z,P=[],C=r,BE=o,R=o,O=l;9 N(){x(Q<EG)?++Q:Q=Z}9 BZ(B,e){g A=h d();A.FN(B);f(e.Bn===BX)A.Bz(e);n A.BP(e);g C=A.CD;f(Dc.Gh)R.DB(C);n f(C.Cz.BA)R.DB(C.Cz.BA(Z,C.y));n R.DB(C.Cz)}9 G(e){BE.8(e)}9 L(e){g A=h d(e.CZ),D=A.EV(),B=P[D];0 P[D];f(B!==F){--M;B.8(A.CW(A.y-BD))}f(M===Z)f(!C)S()}9 BR(e){P.CQ(9(d,A){d.5(h v(e.code+":"+e.F8));0 P[A]});M=Z;R=o}9 Ba(){BE=h A();R=h Ei(O.D7);R.binaryType="Gc";R.Gb=G;R.Ca=L;R.EK=e;R.GG=BR}9 H(e){f(R===o||R.Fy===Ei.CLOSING||R.Fy===Ei.CLOSED)Ba();++M;g B=N(),d=h A();P[B]=d;BE.p(9(){BZ(B,e)});f(O.CI>Z)x d.CI(O.CI).E0(9(e){0 P[B];--M;u e},9(e){x e DO CP});x d}9 S(){f(R!==o){R.Gb=e;R.Ca=e;R.GG=e;R.FO()}}9 I(e){C=!!e}9 J(){x C}1.BS(l,{Ej:{s:H},keepAlive:{k:J,i:I},FO:{s:S}})}9 B(A,e){g d=EA.DL("U");d.E6=A;f(d.B4==="GW:"||d.B4==="Fk:")x h E(A,e);u h v("GM DN GQ\'B_ EI "+d.B4+" FM.")}1.Cm(E,"6",{s:B});C.z.D9=E}(9(){x l||(a,Bb)("l")}()));(9(E){"Bc BY";g F=E.z.Cb,A=E.z.CS,G=E.z.C4,D=E.z.Cy,e=a;9 B(e){l.Du=e||"b.Z"}B.BI.D5=9 d(e,D){g E=A.B$(e);f(E.charAt(Z)==="{")E="["+E+"]";g H=Ed.parse(E),B=h A(),J=h G(B,r);j(g I=Z,K=H.y;I<K;++I){g C=H[I];f(C.Bx){B.$(F.C3);J.Bz(C.Bx.Eg)}n{B.$(F.Em);J.C9(C.DH)}}B.$(F.Cq);x B.CD};B.BI.EH=9 C(B,H){g I=[],E=h A(B),G=h D(E,w,w),J=E._();Cw{g d={};f(J===F.D$){d.method=G.CU();J=E._();f(J===F.C0){d.params=G.FT();J=E._()}f(J===F.C7)J=E._()}f(l.Du==="a.a")d.Du="a.a";n f(l.Du==="b.Z")d.jsonrpc="b.Z";d.Fm=e++;I.B3(d)}CA(J===F.D$);f(I.y>a)x Ed.F7(I);x Ed.F7(I[Z])};E.z.E7=B}(9(){x l||(a,Bb)("l")}()));(9(e){"Bc BY";e.z.common={Et:e.z.Et,DD:e.z.DD,CK:e.z.CK};e.z.io={CS:e.z.CS,Dd:e.z.Dd,Cb:e.z.Cb,ES:e.z.ES,Cy:e.z.Cy,C4:e.z.C4,FC:e.z.FC};e.z.DN={Dr:e.z.Dr,Dx:e.z.Dx,D9:e.z.D9};e.z.Dp={E7:e.z.E7};f(2 DV==="9")f(DV.cmd)DV("z",[],e.z);n f(DV.amd)DV("z",[],9(){x e.z});f(2 Ew==="Cs"&&2 Ew.GT==="Cs")Ew.GT=e.z}(9(){x l||(a,Bb)("l")}()))', 'O|Q|R|S|T|V|X|a|f|g|m|n|0|1|2|3|_|$|if|var|new|set|for|get|this|case|else|null|then|_off|true|value|break|throw|Error|false|return|length|hprose|delete|Object|typeof|stream|_bytes|reject|create|_length|resolve|function|readByte|writeByte|slice|switch|arguments|4|N|Z|s|in|prototype|writeAsciiString|F0|default|call|_refer|l|write|48|P|defineProperties|b|Array|Uint8Array|10|String|strict|U|W|eval|use|00|apply|d|i|Y|q|TagSemicolon|skip|writable|TagRef|constructor|TagNull|catch|h|x|y|63|parseInt|reset|readAsciiString|error|p|writeString|TagOpenbrace|has|refer|push|protocol|setImmediate|A0|subarray|c|o|t|toString|while|indexOf|try|bytes|TagQuote|clear|j|r|timeout|valueOf|ResultMode|Date|e|k|isArray|TimeoutError|forEach|57|BytesIO|_state|readString|TagTime|read|TagInteger|000|data|onmessage|Tags|6|8|setTimeout|TagDate|fromCharCode|J0|Map|_grow|128|TypeError|defineProperty|TagClosebrace|TagPoint|TagMap|TagEnd|Raw|object|RawWithEndTag|u|register|do|TagEmpty|Reader|buffer|TagList|callback|TagDouble|TagError|Writer|name|string|TagTrue|TagUTC|serialize|TagInfinity|postMessage|_0|send|TagLong|Future|TagNaN|5|be|result|v|w|TagObject|createElement|_value|client|instanceof|callbacks|TagFalse|future|unserialize|TagBytes|_rmark|define|_wmark|12|16|must|_call|TagUTF8Char|ArrayBuffer|ClassManager|49|50|51|52|53|54|55|56|_reason|TagClass|_fieldsref|filter|TagString|Client|bind|useHarmonyMap|version|errorHandler|56320|HttpClient|z|E0|$0|ref|_stream|args|number|inputFilter|classref|uri|UTF|WebSocketClient|shift|TagCall|document|255|_subscribers|Normal|readUntil|Serialized|2147483647|outputFilter|support|next|onerror|func|toBytes|TagNeg|_classref|onreject|_ref|TagGuid|RawReader|size|C0|readInt32BE|whenComplete|wrap|onprogress|TagPos|1023|some|G0|JSON|Number|splice|message|onload|WebSocket|sendAndReceive|reduce|is|TagResult|status|_resolve|map|UTC|toLowerCase|reduceRight|Completer|handler|state|module|onreadystatechange|WeakMap|byteLength|catchError|every|msSetImmediate|Math|readList|1970|href|JSONRPCClientFilter|octet|Unfinished|_refcount|isPromise|sequence|getClassName|Formatter|nextTick|process|upload|0000|B0|onfulfill|Promise|7|9|scheme|writeInt32BE|close|Infinity|D0|MessageChannel|readBytes|readListWithoutTag|doesn|count|http|writeObjectWithRef|captureStackTrace|msClearImmediate|TagFunctions|content|writeStringWithRef|NaN|getClassAlias|H0|writeMapWithRef|addEventListener|I0|clearImmediate|wss|join|id|https|65536|script|writeList|K0|L0|Wrong|getSeconds|M0|mode|split|readyState|getHours|hasOwnProperty|readyStateChange|of|messageChannel|any|writeBytesWithRef|getMinutes|stringify|reason|01|_sync|15|18|writeBoolean|24|0x|isFinite|found|onclose|charCodeAt|resultMode|navigator|isNaN|getMilliseconds|This|2147483648|batch|sync|desn|inspect|fields|exports|not|readRaw|ws|checkTag|location|mark|Uint16Array|onopen|arraybuffer|57343|writeHarmonyMapWithRef|55296|bounds|isView|out|writeDateWithRef|classname|getClass|getPrototypeOf|writeListWithRef|topic|TagArgument|Response|boolean'.split('|'), 415, 427, {}, {}))
var api = (function () {
    return function (ip) {
        if (ip.substr(0, 7) == "http://") {
            ip = ip.substr(7);
            i = ip.indexOf("/");
            if (i > 0) {
                ip = ip.substr(0, i);
            }
        }
        if(navigator.userAgent.indexOf("Firefox")!=-1){
        	
        	 return hprose.Client.create("http://" + ip + "/webapi/",
       				["login", "register",
           "getvar", "act", "setdata", "set", "get", "del", "hmclear", "hset", "hget", "hlen", "hkeys",
            "hgetall", "hmset", "hmget", "exit", "restart", "lpush", "lpop", "rpush", "rpop", "lrange", "zadd", "zrange",
            "sadd", "scard", "sclear", "sdiff", "sinter", "smclear", "smembers", "srem", "sunion",
            "sendmsg", "readmsg", "pullmsg", "invite", "accept", "test", "veni", "sethostip", "proxyget",
            "createinvcode", "getinvcodeinfo", "updateinvcode", "deleteinvcode",
            "setinvtemplate", "getinvtemplate", "getappdownloadkey", "getresbyname"]);        	 
        	
        }else{
        	
        	return hprose.Client.create("ws://" + ip + "/ws/",
     				["login", "register",
         "getvar", "act", "setdata", "set", "get", "del", "hmclear", "hset", "hget", "hlen", "hkeys",
          "hgetall", "hmset", "hmget", "exit", "restart", "lpush", "lpop", "rpush", "rpop", "lrange", "zadd", "zrange",
          "sadd", "scard", "sclear", "sdiff", "sinter", "smclear", "smembers", "srem", "sunion",
          "sendmsg", "readmsg", "pullmsg", "invite", "accept", "test", "veni", "sethostip", "proxyget",
          "createinvcode", "getinvcodeinfo", "updateinvcode", "deleteinvcode",
          "setinvtemplate", "getinvtemplate", "getappdownloadkey", "getresbyname"]);	 
        	
        }
    };
} ());

function debug() {};
var alias_consolelog = function() {
    return console.log.apply(console, arguments);
};

function setLog(isShow) {
    if (isShow) {
        debug.error = alias_consolelog;
        debug.log = alias_consolelog;
        debug.info = alias_consolelog;
        debug.warn = alias_consolelog;
    } else {
        var __no_op = function() {};
        debug.error = alias_consolelog;
        debug.log = __no_op;
        debug.info = __no_op;
        debug.warn = __no_op;
    }
};

function processError(name, err) {
    debug.error(name, err);
}
function PE(name) {
    pe = G.ayFE[name];
    //debug.log("PE:", name, "f:", pe);
    if (pe) {
        debug.log("PE: seted");
        return pe;
    }
    //debug.log("pe return");
    return function (e) {
        debug.log("PE:default mark");
        if (G.ayFE[name]) {
            return G.ayFE[name](e);
        }
        G.ayErr[name] = e; //LeitherErr(e)
        debug.error(name + ":" + e);
    }
}
function errReply() {
    for (var i in G.ayErr) {
        f = G.ayFE[i];
        err = G.ayErr[i];
        if (err != null && f != null) {
            G.ayErr[i] = null;
            debug.log("errReply err:", err);
            f(err);
        }
    }
}
function LeitherErr(err) {
    str = err.toString();
    debug.log(str);
    this.ID = "-1";
    this.Info = str;
    if (str.indexOf("Error: ") != 0) {
        return;
    }
    str = str.substring(6);
    id = str.indexOf(':');
    if (id >= 0) {
        this.ID = str.substring(0, id);
        this.Info = str.substring(id + 1);
    }
    debug.log("id=[", this.ID, "] info=[", this.Info, "]");
}
function setErrFunc(name, f) {
    debug.log("setErrFunc ", name, "f:", f);
    G.ayFE[name] = f;
}

var G = {
	//bidPath : window.location.pathname+"/appID/userID/",
	ayFE: { 
        //"login": function (e) {console.error(e);} 
    },
    ayErr: {},
    IPList: [],
    InitFunc: []
}
function PushInitFunc(f) {
    G.InitFunc.push(f);
}
function RunInitFunc() {
    for (i = 0; i < G.InitFunc.length; i++) {
        G.InitFunc[i]();  
    }
}
function LeitherIsOK() {
    return G.api != null;
}

function getErr() {
}
function setMain() {
    if (G.Running) {
        debug.warn("setMain: app running");
        return;
    }
    if (typeof (InitErrFunc) == "function") {
        InitErrFunc();
    }
    if (typeof(main) == "undefined"){
        return;
    }
    debug.log("main function ok run it")
    G.Main = main;

    if (LeitherIsOK() && G.sid != null) {
        G.Running = true;
        RunInitFunc();
        main();
    } else {
        debug.log("errReply()");
        errReply();
    }
}
function readCacheVar(key, def) {
    //debug.log("readCacheVar k:", key, "def:", def)	
    v = localStorage[key];
    if (v) {
        //debug.log("readCacheVar v:", v)
        return JSON.parse(v);
    }
    //debug.log("readCacheVar def:", def)
    if (typeof(def) != "undefined"){
        localStorage[key] = JSON.stringify(def);
    }
    return def;
}
function saveLoginInfo(uid, ppt) {
    debug.log("saveLoginInfo uid:", uid, "ppt:", ppt);
    if (typeof (uid) != "string") {
        uid = "";
    }
    if (typeof (ppt) != "string") {
        ppt = "";
    }
   // localStorage[window.location.pathname + "/" + G.AppBid + "/uid"] = JSON.stringify(uid);
    localStorage[window.location.pathname + "/" + G.AppBid + "/ppt"] = JSON.stringify(ppt);
    debug.log("saveLoginInfo end uid:", localStorage[window.location.pathname + "/" + G.AppBid + "/uid"]);
    G.uid = uid;
    G.userppt = ppt;
}
function InitCfg(I){
    debug.log("InitCfg");
    G.Local = I.Local;
    G.SystemBid = I.SystemBid;
    G.AppBid = I.AppBid;
    G.IPList = readCacheVar(G.AppBid + "/iplist", I.IPList);
    //debug.log(G.IPList)
    G.userppt = readCacheVar(window.location.pathname + "/" + G.AppBid + "/ppt", I.userppt);
    G.AppName = readCacheVar(G.AppBid + "/appname", I.AppName);
    G.uid = readCacheVar(window.location.pathname + "/" + G.AppBid  + "/uid", I.userid);
    //debug.log("InitCfg end， uid=", G.uid)
    return true;
}
function InitDb(){
    debug.log("InitDb");
    var future = new hprose.Future();
    var version = version || 2;
    var request = window.indexedDB.open("LeitherApi", version);
    G.ApptbName = G.appBid + "_" + G.AppName;
    debug.log(G.ApptbName);
    request.onerror = function (e) {
        debug.error(e.currentTarget.error.message);
         future.reject(e);
    };
    request.onsuccess = function (e) {
        debug.log("InitDb ok");
        var db = e.target.result;
        G.LeitherDb = db;
        future.resolve(db);
    };
    request.onupgradeneeded = function (e) {
        var db = e.target.result;
        //debug.log(db.objectStoreNames)
        if (!db.objectStoreNames.contains('res')) {
            var store = db.createObjectStore('res', { keyPath: "id" });
        }
        if (db.objectStoreNames.contains(G.ApptbName)) {
            db.deleteObjectStore(G.ApptbName); 
            //var store = db.createObjectStore(G.ApptbName, { keyPath: "id" }); //必须放对象
        }
        debug.log('DB version changed to ' + version);
    };
    return future;
}

function GetDbData(key){
    var tr = G.LeitherDb.transaction("res", 'readwrite');
    var store = tr.objectStore("res");
    var future = new hprose.Future();
    debug.log('getdbdata ')
    request = store.get(key)
    request.onerror = function (e) {
        future.reject(e)
    };
    request.onsuccess = function (e) {
        future.resolve(e.target.result)
        debug.log('getdbdata2 ', e.target.result)
    };
    return future;
}

function SetDbData(value){
    var tr = G.LeitherDb.transaction("res", 'readwrite');
    var store = tr.objectStore("res");
    debug.log('setdbdata ')
    var future = new hprose.Future();
    request = store.add(value);
    request.onerror = function (e) {
        debug.log('setdbdata err', e)
        future.reject(e)
    };
    request.onsuccess = function (e) {
        future.resolve(e.target.result)
        debug.log('getdata2 ', e.target.result)
    };
    return future;
}

function RunApp(I, ipnum) {
	//debugger;
    setLog(I.Log);
	G.I=I;
    G.appBid = I.AppBid;
    G.Running = false;
    if (I.AppVer) {
        G.AppVer = I.AppVer;
    } else {
        G.AppVer = "last";
    }

    debug.log("RunApp");
    //debug.log("LeitherIsOK:", LeitherIsOK())
    if (ipnum == 0 && !InitCfg(I)) {    //读取配置
        return;
    }
    if (G.IPList.length <= ipnum) {
        //后续可改为利用错误机制 tbd
        console.error("iplist.length [", G.IPList.length, "]<ipnum[", ipnum, "]");
        return
    }
    ip = G.IPList[ipnum];
    //debug.log("ip:", G.IPList)
    RunAppByIP(ip);
}
function processManifest(data) {
    debug.log("hget manifest ", data);
    m = JSON.parse(data);
    getList = function (res, ver) {
        if (ver == "last" || ver == "release") {
            ver = res[ver];
        }
        return res.ResFile[ver];
    }
    //debug.log(m[G.AppVer])
    list = getList(m, G.AppVer); //m.ResFile[m.LastVer]
    getFs = function (i) {
        debug.log("getFs", i);
        fs = [];
        for (; i < list.length; i++) {
            Key = list[i];
            debug.log("lookup list", Key);
            if (Key == "") {
                i++;
                break;
            }
            debug.log("push");
            fs.push(LoadJs(Key)
            /*
            (function (key) {
                var future = new hprose.Future();
                debug.log("future", key);
                LoadJsByKey(G.AppBid, key, function () {
                    debug.log("res load ", key);
                    future.resolve(key);
                }, function () {
                    debug.log("reject ", key);
                    future.reject(key);
                })
                return future;
            })(Key)*/
            );
            debug.log("push end");
        }
        debug.log("all");
        var Future = hprose.Future;
        Future.all(fs).then(function (values) {
            debug.log("all promise", values);
            setMain();
            if (i < list.length) {
                getFs(i);
            }
        }, function (e) {
            debug.log(e);
        });
        debug.log("all end");
    }
    getFs(0);
}
function InitApp(stub) {
    debug.log("InitApp");
    var future = new hprose.Future();
    if (G.Local) {
        debug.log("use local file");
        setMain();
        future.resolve();
        return future;
    }

    GetDbData(G.AppName)
    .then(function(manifest){
        debug.log('getdbdata data = ', manifest)
        if (manifest) {
            debug.log("manifest local");
            processManifest(manifest.data);
            future.resolve();
         } else {
            debug.log("manifest hget", G.AppBid, ",appname:", G.AppName);
            stub.hget("", G.AppBid, "applist", G.AppName)
            .then(function (data) {
                 debug.log("manifest hget ok");
                SetDbData({
                    id:G.AppName,
                    data: data,
                    tbname: G.ApptbName
                })
                processManifest(data);
                future.resolve();
            })
        }
    },function (e) {
        debug.error(e);
    })/*
    manifest = localStorage[G.AppName];
    if (manifest) {
        debug.log("manifest local");
        processManifest(manifest);
        future.resolve();
    } else {
        debug.log("manifest hget", G.AppBid, ",appname:", G.AppName);
        stub.hget("", G.AppBid, "applist", G.AppName)
        .then(function (data) {
            debug.log("manifest hget ok");
            localStorage[G.AppName] = data;
            processManifest(data);
            future.resolve();
        })
    }*/
    return future;
}
function RunAppByIP(ip) {
    //读取本地配置文件
    //
    if (ip.length > 0) {
        G.currentIP = ip;
    } else {
        ip = G.currentIP;
    }
	G.api = api(ip);
    InitDb()
    .then(function(db){
	    debug.log("hprose ready", db)
        G.api.ready(function (stub) {
            debug.log("hprose ready ok")
	        //应该先load资源再login
	        debug.log("G.uid=", G.uid)
	        InitApp(stub)
            .then(function () {
                debug.log("login")
                errfunc = PE("login");
                stub.login(G.uid, G.userppt)//如果没有用户信息，应该进入代码的登录或初始化函数
                .then(function (reply) {
                debug.log("login ok")
                G.sid = reply.sid;				
				G.user = reply.user;	
				//debugger;
				if(reply.user!=null){
					G.bid = reply.user.id;//for weibo	
				}else{
					G.bid=G.uid;
				}																	
				G.leClient = G.api;//for weibo
				G.swarm = reply.swarm;	
            debug.log("LeitherIsOK:", LeitherIsOK());
            debug.log("login ok sid=", reply.sid);
            debug.log("user= ", reply.user);
            debug.log("swarm=", reply.swarm);
            debug.log("appName=", G.AppName);
            setMain();
            //同步检查最新版的hprose
            stub.getresbyname(G.sid, G.SystemBid, "LeitherApi", G.AppVer)
            .then(function (data) {
                var r = new FileReader();
                r.onload = function (e) {
                    debug.log("leitherApi re get ok");
   //                 SetDbData({
     //           id:"leitherApi",
       //         data:e.target.result
         //      })
                    localStorage["leitherApi"] = e.target.result;
                };
                r.readAsText(new Blob([data]));
            })
            stub.hget(G.sid, G.AppBid, "applist", G.AppName)
            .then(function (data) {
                debug.log("manifest re hget ok");
                SetDbData({
                    id:G.AppName,
                    data: data,
                    tbname: G.ApptbName
                })
                //localStorage[G.AppName] = data;
            })
        }, errfunc);
        });
	}, PE("api.ready"))}, PE("InitDb"));
}
function LoadJs(key){    
    var future = new hprose.Future();
    debug.log("load js ", key);
    var script = document.createElement("script");
    script.type = "text/javascript";
    GetDbData(key).then(function (d) {
        if (d) {      
            script.textContent = d.data;
            document.getElementsByTagName("head")[0].appendChild(script);
            future.resolve(key);
        } else {
            debug.log("check leither");
            if ((typeof (LeitherIsOK) == "function") && LeitherIsOK()) {
                debug.log("check leither ok");
                ff = function (reason) {
                    debug.error(reason);
                    future.reject(key);
            };
            G.api.ready(function (stub) {
                debug.log(" G.api.ready");
                stub.get("", G.AppBid, key, function (data) {
                    debug.log("get ok  ", data);
                    if (data) {
                        debug.log(" if (data) {");
                        var r = new FileReader();
                        r.onload = function (e) {
                            //localStorage[key] = e.target.result;
                            debug.log(" SetDbData");
                            SetDbData({
                                id:key,
                                data: e.target.result,
                                tbname: G.ApptbName
                            })
                            script.textContent = e.target.result;
                            document.getElementsByTagName("head")[0].appendChild(script);
                           future.resolve(key);
                        };
                    };
                    r.readAsText(new Blob([data]));
                }, ff);
            },ff);
        } else {
            debug.error("leither is not ok");
            future.reject(key);
        }
    }

    },function(e){
 
    })
    /*
    if (localStorage[key]) {      
        script.textContent = localStorage[key];
        document.getElementsByTagName("head")[0].appendChild(script);
        future.resolve(key);
    } else {
        debug.log("check leither");
        if ((typeof (LeitherIsOK) == "function") && LeitherIsOK()) {
            debug.log("check leither ok");
            ff = function (reason) {
                debug.error(reason);
                future.reject(key);
            };
            G.api.ready(function (stub) {
             //debug.log(" G.api.ready");
                stub.get("", G.AppBid, key, function (data) {
               // debug.log("get ok  ", key);
                    if (data) {
                        var r = new FileReader();
                        r.onload = function (e) {
                            localStorage[key] = e.target.result;
                            script.textContent = e.target.result;
                            document.getElementsByTagName("head")[0].appendChild(script);
                           future.resolve(key);
                        };
                    };
                    r.readAsText(new Blob([data]));
                }, ff);
            },ff);
        } else {
            debug.error("leither is not ok");
            future.reject(key);
        }
    }  */
    return future
}
/*
function LoadJsByKey(bid, key, fs, ff) {
    //console.log("loadjsbykey");
    if (localStorage[key]) {
        //console.log("loadjsbykey localStorage key", key);
        var script = document.createElement("script");
        //debug.info(v);
        script.type = "text/javascript";
        script.textContent = localStorage[key];
        document.getElementsByTagName("head")[0].appendChild(script);
        fs();
    } else {
        //console.log("loadjsbykey stub");
        var script = document.createElement("script");
        if ((typeof (LeitherIsOK) == "function") && LeitherIsOK()) {
            G.api.ready(function (stub) {
                stub.get("", bid, key, function (data) {
                    if (data) {
                        var r = new FileReader();
                        r.onload = function (e) {
                            localStorage[key] = e.target.result;
                            script.type = "text/javascript";
                            script.textContent = e.target.result;
                            document.getElementsByTagName("head")[0].appendChild(script);
                            //console.log(script);
                            fs();
                        };
                    };
                    r.readAsText(new Blob([data]));
                }, ff);
            }, function (reason) {
                ff(reason);
                debug.error(reason);
            });
        } else {
            debug.error("leither is not ok");
            ff("leither is not ok");
        }
    }
};
*/